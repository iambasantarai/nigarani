<!doctype html>
<html>
  <head>
    <title>Nigarānī</title>

    <style>
      .container {
        margin: 20px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f9f9f9;
      }

      .container ul {
        list-style-type: none;
        padding: 0;
      }

      .container ul li {
        margin: 5px 0;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <ul id="info-list"></ul>
    </div>

    <script>
      const infoList = document.getElementById("info-list");
      const eventSource = new EventSource("http://localhost:8000/sys-info");

      eventSource.addEventListener("sysInfo", (event) => {
        const sysInfo = JSON.parse(event.data);
        const memory = sysInfo.memory;
        const cpu = sysInfo.cpu;
        const disk = sysInfo.disk;

        infoList.innerHTML = "";

        const modelName = cpu.modelName;
        infoList.innerHTML += `<li><strong>CPU Model Name:</strong> ${modelName}</li>`;

        const cores = cpu.cores;
        infoList.innerHTML += `<li><strong>Cores:</strong> ${cores}</li>`;

        const memCapacity = memory.capacity;
        infoList.innerHTML += `<li><strong>Total Memory:</strong> ${memCapacity.bytes} bytes (${memCapacity.MiB} MiB, ${memCapacity.GiB} GiB)</li>`;

        const memUsage = memory.usage;
        infoList.innerHTML += `<li><strong>Used Memory:</strong> ${memUsage.bytes} bytes (${memUsage.MiB} MiB, ${memUsage.GiB} GiB)</li>`;

        const memAvailability = memory.availability;
        infoList.innerHTML += `<li><strong>Free Memory:</strong> ${memAvailability.bytes} bytes (${memAvailability.MiB} MiB, ${memAvailability.GiB} GiB)</li>`;

        const diskCapacity = disk.capacity;
        infoList.innerHTML += `<li><strong>Total Disk:</strong> ${diskCapacity.bytes} bytes (${diskCapacity.MiB} MiB, ${diskCapacity.GiB} GiB)</li>`;

        const diskUsage = disk.usage;
        infoList.innerHTML += `<li><strong>Used Disk:</strong> ${diskUsage.bytes} bytes (${diskUsage.MiB} MiB, ${diskUsage.GiB} GiB)</li>`;

        const diskAvailability = disk.availability;
        infoList.innerHTML += `<li><strong>Free Disk:</strong> ${diskAvailability.bytes} bytes (${diskAvailability.MiB} MiB, ${diskAvailability.GiB} GiB)</li>`;
      });

      eventSource.addEventListener("error", (event) => {
        info.textContent = event.data;
      });

      eventSource.onerror = (error) => {
        console.error("SSE ERROR: ", error);
      };
    </script>
  </body>
</html>
